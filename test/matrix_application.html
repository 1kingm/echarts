<!DOCTYPE html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->


<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="lib/simpleRequire.js"></script>
        <script src="lib/config.js"></script>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/facePrint.js"></script>
        <script src="lib/testHelper.js"></script>
        <!-- <script src="ut/lib/canteen.js"></script> -->
        <link rel="stylesheet" href="lib/reset.css" />
    </head>
    <body>
        <style>
        </style>

        <div id="main0"></div>
        <div id="main1"></div>
        <div id="main2"></div>
        <div id="main3"></div>
        <div id="main4"></div>

        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                const label = {
                    fontSize: 16,
                    color: '#555'
                };
                const option = {
                    matrix: {
                        x: {
                            data: ['Positive', 'Negative'],
                            label
                        },
                        y: {
                            data: ['Positive', 'Negative'],
                            label
                        },
                        top: 80,
                        width: 600,
                        left: 'center'
                    },
                    series: {
                        type: 'custom',
                        coordinateSystem: 'matrix',
                        data: [
                            ['Positive', 'Positive', 10],
                            ['Positive', 'Negative', 2],
                            ['Negative', 'Positive', 3],
                            ['Negative', 'Negative', 5]
                        ],
                        label: {
                            show: true,
                            formatter: params => {
                                const value = params.value[2];
                                return '{name|'
                                    + (params.value[0] === params.value[1]
                                    ? 'True ' : 'False ')
                                    + params.value[1] + '}\n{value|'
                                    + value + '}';
                            },
                            rich: {
                                name: {
                                    color: '#fff',
                                    backgroundColor: '#999',
                                    textBorderColor: '#333',
                                    padding: 5,
                                    fontSize: 18
                                },
                                value: {
                                    color: '#444',
                                    textBorderWidth:  0,
                                    padding: 5,
                                    fontSize: 16,
                                    align: 'center'
                                }
                            }
                        },
                        renderItem: function (params, api) {
                            const x = api.value(0);
                            const y = api.value(1);
                            const center = api.coord([x, y]);
                            const size = api.size([x, y]);
                            return {
                                type: 'rect',
                                shape: {
                                    x: center[0] - size[0] / 2,
                                    y: center[1] - size[1] / 2,
                                    width: size[0],
                                    height: size[1]
                                },
                                style: api.style({
                                    fill: x === y ? '#8f8' : '#f88',
                                }),
                            }
                        }
                    },
                    graphic: {
                        elements: [{
                            type: 'text',
                            style: {
                                text: 'True Class',
                                fill: '#333',
                                font: 'bold 24px serif',
                                textAlign: 'center'
                            },
                            x: (window.innerWidth - 600) / 2 + 600 / 6 * 4,
                            y: 40,
                        }, {
                            type: 'text',
                            style: {
                                text: 'Predicted Class',
                                fill: '#333',
                                font: 'bold 24px serif',
                                textAlign: 'center'
                            },
                            x: (window.innerWidth - 600) / 2 - 50,
                            y: 270,
                            rotation: Math.PI / 2
                        }]
                    }
                };

                var chart = testHelper.create(echarts, 'main0', {
                    title: [
                        'Confusion Matrix'
                    ],
                    option: option
                });
            });
        </script>

        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                const xCnt = 10;
                const yCnt = 6;
                const xData = [];
                const yData = [];
                for (let i = 0; i < xCnt; ++i) {
                    xData.push({
                        value: 'X' + (i + 1)
                    });
                }

                for (let i = 0; i < yCnt; ++i) {
                    yData.push({
                        value: 'Y' + (i + 1)
                    });
                }

                const data = [];
                for (let i = 1; i <= xCnt; ++i) {
                    for (let j = 1; j <= yCnt; ++j) {
                        data.push([
                            'X' + i,
                            'Y' + j,
                            Math.random() * 2 - 1
                        ]);
                    }
                }

                const option = {
                    matrix: {
                        x: {
                            data: xData
                        },
                        y: {
                            data: yData
                        },
                        top: 80
                    },
                    visualMap: {
                        type: 'continuous',
                        min: -1,
                        max: 1,
                        dimension: 2,
                        calculable: true,
                        orient: 'horizontal',
                        top: 5,
                        left: 'center',
                        inRange: {
                            color: [
                                '#313695',
                                '#4575b4',
                                '#74add1',
                                '#abd9e9',
                                '#e0f3f8',
                                '#ffffbf',
                                '#fee090',
                                '#fdae61',
                                '#f46d43',
                                '#d73027',
                                '#a50026'
                            ],
                            symbolSize: [15, 40]
                        }
                    },
                    series: {
                        type: 'scatter',
                        coordinateSystem: 'matrix',
                        data,
                        itemStyle: {
                            opacity: 1
                        },
                        label: {
                            show: true,
                            formatter: params => params.value[2].toFixed(2)
                        }
                    }
                };

                var chart = testHelper.create(echarts, 'main1', {
                    title: [
                        'Correlation Matrix (Scatter)'
                    ],
                    option: option
                });
            });
        </script>

        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                const xCnt = 8;
                const yCnt = xCnt;
                const xData = [];
                const yData = [];
                for (let i = 0; i < xCnt; ++i) {
                    xData.push({
                        value: 'X' + (i + 1)
                    });
                }

                for (let i = 0; i < yCnt; ++i) {
                    yData.push({
                        value: 'Y' + (i + 1)
                    });
                }

                const data = [];
                for (let i = 1; i <= xCnt; ++i) {
                    for (let j = 1; j <= yCnt; ++j) {
                        if (i >= j) {
                            data.push([
                                'X' + i,
                                'Y' + j,
                                i === j ? 1 : Math.random() * 2 - 1
                            ]);
                        }
                    }
                }

                const option = {
                    matrix: {
                        x: {
                            data: xData
                        },
                        y: {
                            data: yData
                        },
                        top: 80
                    },
                    visualMap: {
                        type: 'continuous',
                        min: -1,
                        max: 1,
                        dimension: 2,
                        calculable: true,
                        orient: 'horizontal',
                        top: 5,
                        left: 'center',
                        inRange: {
                            color: [
                                '#313695',
                                '#4575b4',
                                '#74add1',
                                '#abd9e9',
                                '#e0f3f8',
                                '#ffffbf',
                                '#fee090',
                                '#fdae61',
                                '#f46d43',
                                '#d73027',
                                '#a50026'
                            ]
                        }
                    },
                    series: {
                        type: 'heatmap',
                        coordinateSystem: 'matrix',
                        data,
                        label: {
                            show: true,
                            formatter: params => params.value[2].toFixed(2)
                        }
                    }
                };

                var chart = testHelper.create(echarts, 'main2', {
                    title: [
                        'Correlation Matrix (Heatmap)'
                    ],
                    option: option
                });
            });
        </script>

        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                const xData = [];
                const yData = [];
                for (let i = 0; i < 5; ++i) {
                    const children = [];
                    for (let j = 0; j < 5; ++j) {
                        children.push(i * 5 + j + 1 + '');
                    }
                    xData.push({
                        value: 'X' + (i + 1),
                        children
                    });
                    yData.push({
                        value: 'Y' + (i + 1),
                        children
                    });
                }

                const data = [];
                const size = 25;
                let temp = {};

                for (let i = 1; i <= size; ++i) {
                    for (let j = 1; j <= size; ++j) {
                        let base = i === j ? 100 : 20;
                        const iGroup = Math.ceil(i / 5);
                        const jGroup = Math.ceil(j / 5);
                        base += (3 - Math.abs(iGroup - jGroup)) * 35;
                        if (i % 5 === j % 5) {
                            base += 20;
                        }
                        if (Math.random() > 0.9) {
                            base += Math.random() * 40;
                        }

                        if (i > j) {
                            // Use the previously calculated value to ensure symmetry
                            data.push([
                                i + '',
                                j + '',
                                temp[j + '_' + i]
                            ]);
                        } else {
                            // Calculate a new value and save it for future use
                            let value = (Math.random() * 0.5 + 0.5) * base;
                            data.push([
                                i + '',
                                j + '',
                                value
                            ]);
                            temp[i + '_' + j] = value;
                        }
                    }
                }

                const option = {
                    matrix: {
                        x: {
                            data: xData,
                            show: false
                        },
                        y: {
                            data: yData,
                            show: false
                        },
                        width: 500,
                        height: 500,
                        left: (window.innerWidth - 500) / 2
                    },
                    tooltip: {
                        show: true,
                        valueFormatter: value => Math.round(value)
                    },
                    visualMap: {
                        type: 'continuous',
                        min: 15,
                        max: 120,
                        dimension: 2,
                        calculable: true,
                        orient: 'horizontal',
                        top: 5,
                        left: 'center',
                        inRange: {
                            color: [
                                '#313695',
                                '#4575b4',
                                '#74add1',
                                '#abd9e9',
                                '#e0f3f8',
                                '#ffffbf',
                                '#fee090',
                                '#fdae61',
                                '#f46d43',
                                '#d73027',
                                '#a50026'
                            ]
                        }
                    },
                    series: {
                        type: 'heatmap',
                        coordinateSystem: 'matrix',
                        data
                    }
                };

                var chart = testHelper.create(echarts, 'main3', {
                    title: [
                        'Covariance Matrix'
                    ],
                    option: option,
                    height: 600
                });
            });
        </script>

        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                const colors = {
                    red: '#f88',
                    green: '#8f8',
                    blue: '#8bf',
                    yellow: '#ff8',
                }
                const option = {
                    matrix: {
                        x: {
                            data: Array.from({length: 19}, (_, i) => i + 1 + ''),
                            label: {
                                show: false
                            },
                            itemStyle: {
                                borderWidth: 0
                            }
                        },
                        y: {
                            data: Array.from({length: 10}, (_, i) => i + 1 + ''),
                            label: {
                                show: false
                            },
                            itemStyle: {
                                borderWidth: 0
                            }
                        },
                        left: 'center',
                        width: 900,
                        backgroundStyle: {
                            borderWidth: 0
                        },
                        innerBackgroundStyle: {
                            borderWidth: 0
                        }
                    },
                    series: {
                        type: 'custom',
                        coordinateSystem: 'matrix',
                        data: [
                            ['1', '1', '1', 'H', colors.red],
                            ['19', '1', '2', 'He', colors.red],
                            ['1', '2', '3', 'Li', colors.red],
                            ['2', '2', '4', 'Be', colors.red],
                            ['14', '2', '5', 'B', colors.yellow],
                            ['15', '2', '6', 'C', colors.yellow],
                            ['16', '2', '7', 'N', colors.yellow],
                            ['17', '2', '8', 'O', colors.yellow],
                            ['18', '2', '9', 'F', colors.yellow],
                            ['19', '2', '10', 'Ne', colors.yellow],
                            ['1', '3', '11', 'Na', colors.red],
                            ['2', '3', '12', 'Mg', colors.red],
                            ['14', '3', '13', 'Al', colors.yellow],
                            ['15', '3', '14', 'Si', colors.yellow],
                            ['16', '3', '15', 'P', colors.yellow],
                            ['17', '3', '16', 'S', colors.yellow],
                            ['18', '3', '17', 'Cl', colors.yellow],
                            ['19', '3', '18', 'Ar', colors.yellow],
                            ['1', '4', '19', 'K', colors.red],
                            ['2', '4', '20', 'Ca', colors.red],
                            ['4', '4', '21', 'Sc', colors.blue],
                            ['5', '4', '22', 'Ti', colors.blue],
                            ['6', '4', '23', 'V', colors.blue],
                            ['7', '4', '24', 'Cr', colors.blue],
                            ['8', '4', '25', 'Mn', colors.blue],
                            ['9', '4', '26', 'Fe', colors.blue],
                            ['10', '4', '27', 'Co', colors.blue],
                            ['11', '4', '28', 'Ni', colors.blue],
                            ['12', '4', '29', 'Cu', colors.blue],
                            ['13', '4', '30', 'Zn', colors.blue],
                            ['14', '4', '31', 'Ga', colors.yellow],
                            ['15', '4', '32', 'Ge', colors.yellow],
                            ['16', '4', '33', 'As', colors.yellow],
                            ['17', '4', '34', 'Se', colors.yellow],
                            ['18', '4', '35', 'Br', colors.yellow],
                            ['19', '4', '36', 'Kr', colors.yellow],
                            ['1', '5', '37', 'Rb', colors.red],
                            ['2', '5', '38', 'Sr', colors.red],
                            ['4', '5', '39', 'Y', colors.blue],
                            ['5', '5', '40', 'Zr', colors.blue],
                            ['6', '5', '41', 'Nb', colors.blue],
                            ['7', '5', '42', 'Mo', colors.blue],
                            ['8', '5', '43', 'Tc', colors.blue],
                            ['9', '5', '44', 'Ru', colors.blue],
                            ['10', '5', '45', 'Rh', colors.blue],
                            ['11', '5', '46', 'Pd', colors.blue],
                            ['12', '5', '47', 'Ag', colors.blue],
                            ['13', '5', '48', 'Cd', colors.blue],
                            ['14', '5', '49', 'In', colors.yellow],
                            ['15', '5', '50', 'Sn', colors.yellow],
                            ['16', '5', '51', 'Sb', colors.yellow],
                            ['17', '5', '52', 'Te', colors.yellow],
                            ['18', '5', '53', 'I', colors.yellow],
                            ['19', '5', '54', 'Xe', colors.yellow],
                            ['1', '6', '55', 'Cs', colors.red],
                            ['2', '6', '56', 'Ba', colors.red],
                            ['4', '9', '57', 'La', colors.green],
                            ['5', '9', '58', 'Ce', colors.green],
                            ['6', '9', '59', 'Pr', colors.green],
                            ['7', '9', '60', 'Nd', colors.green],
                            ['8', '9', '61', 'Pm', colors.green],
                            ['9', '9', '62', 'Sm', colors.green],
                            ['10', '9', '63', 'Eu', colors.green],
                            ['11', '9', '64', 'Gd', colors.green],
                            ['12', '9', '65', 'Tb', colors.green],
                            ['13', '9', '66', 'Dy', colors.green],
                            ['14', '9', '67', 'Ho', colors.green],
                            ['15', '9', '68', 'Er', colors.green],
                            ['16', '9', '69', 'Tm', colors.green],
                            ['17', '9', '70', 'Yb', colors.green],
                            ['4', '6', '71', 'Lu', colors.blue],
                            ['5', '6', '72', 'Hf', colors.blue],
                            ['6', '6', '73', 'Ta', colors.blue],
                            ['7', '6', '74', 'W', colors.blue],
                            ['8', '6', '75', 'Re', colors.blue],
                            ['9', '6', '76', 'Os', colors.blue],
                            ['10', '6', '77', 'Ir', colors.blue],
                            ['11', '6', '78', 'Pt', colors.blue],
                            ['12', '6', '79', 'Au', colors.blue],
                            ['13', '6', '80', 'Hg', colors.blue],
                            ['14', '6', '81', 'Tl', colors.yellow],
                            ['15', '6', '82', 'Pb', colors.yellow],
                            ['16', '6', '83', 'Bi', colors.yellow],
                            ['17', '6', '84', 'Po', colors.yellow],
                            ['18', '6', '85', 'At', colors.yellow],
                            ['19', '6', '86', 'Rn', colors.yellow],
                            ['1', '7', '87', 'Fr', colors.red],
                            ['2', '7', '88', 'Ra', colors.red],
                            ['4', '10', '89', 'Ac', colors.green],
                            ['5', '10', '90', 'Th', colors.green],
                            ['6', '10', '91', 'Pa', colors.green],
                            ['7', '10', '92', 'U', colors.green],
                            ['8', '10', '93', 'Np', colors.green],
                            ['9', '10', '94', 'Pu', colors.green],
                            ['10', '10', '95', 'Am', colors.green],
                            ['11', '10', '96', 'Cm', colors.green],
                            ['12', '10', '97', 'Bk', colors.green],
                            ['13', '10', '98', 'Cf', colors.green],
                            ['14', '10', '99', 'Es', colors.green],
                            ['15', '10', '100', 'Fm', colors.green],
                            ['16', '10', '101', 'Md', colors.green],
                            ['17', '10', '102', 'No', colors.green],
                            ['4', '7', '103', 'Lr', colors.blue],
                            ['5', '7', '104', 'Rf', colors.blue],
                            ['6', '7', '105', 'Db', colors.blue],
                            ['7', '7', '106', 'Sg', colors.blue],
                            ['8', '7', '107', 'Bh', colors.blue],
                            ['9', '7', '108', 'Hs', colors.blue],
                            ['10', '7', '109', 'Mt', colors.blue],
                            ['11', '7', '110', 'Ds', colors.blue],
                            ['12', '7', '111', 'Rg', colors.blue],
                            ['13', '7', '112', 'Cn', colors.blue],
                            ['14', '7', '113', 'Nh', colors.yellow],
                            ['15', '7', '114', 'Fl', colors.yellow],
                            ['16', '7', '115', 'Mc', colors.yellow],
                            ['17', '7', '116', 'Lv', colors.yellow],
                            ['18', '7', '117', 'Ts', colors.yellow],
                            ['19', '7', '118', 'Og', colors.yellow],

                            ['3', '6', null, 'La~Yb', colors.green],
                            ['3', '7', null, 'Ac~No', colors.green],
                        ],
                        label: {
                            show: true,
                            formatter: params => {
                                if (params.value[2] == null) {
                                    return '{small|' + params.value[3] + '}';
                                }
                                return params.value[2] + '\n' + params.value[3];
                            },
                            rich: {
                                small: {
                                    fontSize: 12,
                                    color: '#777'
                                }
                            },
                            textStyle: {
                                fontSize: 14,
                                color: '#555',
                                align: 'center'
                            }
                        },
                        renderItem: function (params, api) {
                            const x = api.value(0);
                            const y = api.value(1);
                            const center = api.coord([x, y]);
                            const size = api.size([x, y]);
                            const isElement = !isNaN(api.value(2));
                            const margin = 2;
                            return {
                                type: 'rect',
                                shape: {
                                    x: center[0] - size[0] / 2 + margin,
                                    y: center[1] - size[1] / 2 + margin,
                                    width: size[0] - margin * 2,
                                    height: size[1] - margin * 2
                                },
                                style: api.style({
                                    fill: api.value(4),
                                    stroke: '#aaa',
                                    lineWidth: isElement ? 1 : 0,
                                    opacity: isElement ? 1 : 0.5
                                }),
                            }
                        }
                    }
                };

                var chart = testHelper.create(echarts, 'main4', {
                    title: [
                        'Periodic Table'
                    ],
                    option: option,
                    height: 600
                });

                const elements = [
                    ['2', '9', 'Lanthanides', 20],
                    ['2', '10', 'Actinides', 20],
                    ['1', '1', 'Nonmetals', -70],
                    ['1', '2', 'Metals', -70],
                    ['19', '1', 'Noble gases', 0, -40],
                    ['9', '3', 'Transition metals\n(somtimes excl. group 12)', -25],
                    ['1', '8', 's-block\n(incl. He)', 20, -3],
                    ['3', '8', 'f-block', 0, -10],
                    ['9', '8', 'd-block', -25, -10],
                    ['17', '8', 'p-block (excl. He)', -25, -10],
                    ['16', '1', 'Some elements near\nthe dashed staircase are\nsometimes called metalloids']
                ].map(row => {
                    const center = chart.convertToPixel({
                        matrixIndex: 0
                    }, row.slice(0, 2));
                    return {
                        type: 'text',
                        style: {
                            text: row[2],
                            fill: '#333',
                            font: 'italic bold 14px sans-serif',
                            textAlign: 'center',
                            textVerticalAlign: 'middle'
                        },
                        x: center[0] + (row[3] || 0),
                        y: center[1] + (row[4] || 0),
                    };
                });

                chart.setOption({
                    graphic: {
                        elements
                    }
                });
            });
        </script>
    </body>
</html>

