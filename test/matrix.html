<!DOCTYPE html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->


<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="lib/simpleRequire.js"></script>
        <script src="lib/config.js"></script>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/facePrint.js"></script>
        <script src="lib/testHelper.js"></script>
        <!-- <script src="ut/lib/canteen.js"></script> -->
        <link rel="stylesheet" href="lib/reset.css" />
    </head>
    <body>
        <style>
        </style>



        <div id="main0"></div>
        <div id="main0-1"></div>
        <div id="main1"></div>
        <div id="main2"></div>
        <div id="main3"></div>
        <div id="main4"></div>






        <script>
        require([
            'echarts',
            // 'map/js/china',
            // './data/nutrients.json'
        ], function (echarts) {
            var option;

            option = {
                matrix: {
                    x: {
                        data: [{
                            value: 'A',
                            children: ['A1', 'A2', {
                                value: 'A3',
                                children: ['A31', 'A32']
                            }]
                        }]
                    },
                    y: {
                        data: ['U', 'V']
                    }
                },
                visualMap: {
                    type: 'continuous',
                    min: 0,
                    max: 80,
                    top: 'middle',
                    dimension: 2,
                    calculable: true
                },
                series: {
                    type: 'heatmap',
                    coordinateSystem: 'matrix',
                    data: [
                        ['A1', 'U', 10], ['A1', 'V', 20], ['A2', 'U', 30],
                        ['A2', 'V', 40], ['A31', 'U', 50], ['A3', 'V', 60]
                    ],
                    label: {
                        show: true
                    }
                }
            };

            var chart = testHelper.create(echarts, 'main0', {
                title: [
                    'Heatmap with Matrix'
                ],
                option: option
            });
        });
        </script>

        <script>
        require([
            'echarts',
            // 'map/js/china',
            // './data/nutrients.json'
        ], function (echarts) {
            var option;

            option = {
                dataset: {
                    source: [
                        ['A1', 'U', 10], ['A1', 'V', 20], ['A2', 'U', 30],
                        ['A2', 'V', 40], ['A31', 'U', 50], ['A3', 'V', 60]
                    ]
                },
                matrix: {
                    x: {
                        data: [{
                            value: 'A',
                            children: ['A1', 'A2', {
                                value: 'A3',
                                children: ['A31', 'A32']
                            }]
                        }]
                    },
                    y: {
                        data: ['U', 'V']
                    }
                },
                visualMap: {
                    type: 'continuous',
                    min: 0,
                    max: 80,
                    top: 'middle',
                    dimension: 2,
                    calculable: true
                },
                series: {
                    type: 'heatmap',
                    coordinateSystem: 'matrix',
                    label: {
                        show: true
                    }
                }
            };

            var chart = testHelper.create(echarts, 'main0-1', {
                title: [
                    'Heatmap with Matrix (dataset)'
                ],
                option: option
            });
        });
        </script>






        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                var option;
                option = {
                    matrix: {
                        x: {
                            data: [{
                                value: 'A',
                                children: ['A1', 'A2', {
                                    value: 'A3',
                                    children: ['A31', 'A32']
                                }]
                            }]
                        },
                        y: {
                            data: ['U', 'V']
                        }
                    },
                    series: [{
                        type: 'pie',
                        coordinateSystem: 'matrix',
                        center: ['A1', 'U'],
                        radius: 18,
                        data: [
                            {
                                value: 12,
                                name: 'x'
                            }, {
                                value: 24,
                                name: 'y'
                            }, {
                                value: 23,
                                name: 'z'
                            }
                        ],
                        label: {
                            show: true
                        }
                    }, {
                        type: 'pie',
                        coordinateSystem: 'matrix',
                        center: ['A31', 'V'],
                        radius: 18,
                        data: [
                            {
                                value: 18,
                                name: 'x'
                            }, {
                                value: 44,
                                name: 'y'
                            }, {
                                value: 43,
                                name: 'z'
                            }
                        ],
                        label: {
                            show: true
                        }
                    }]
                };

                var chart = testHelper.create(echarts, 'main1', {
                    title: [
                        'Pie with Matrix'
                    ],
                    option: option
                });
            });
        </script>






        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                var option;
                option = {
                    matrix: {
                        x: {
                            data: [{
                                value: 'A',
                                children: ['A1', 'A2', {
                                    value: 'A3',
                                    children: ['A31', 'A32']
                                }]
                            }]
                        },
                        y: {
                            data: ['U', 'V']
                        }
                    },
                    series: [{
                        type: 'graph',
                        coordinateSystem: 'matrix',
                        edgeSymbol: ['none', 'arrow'],
                        symbolSize: 30,
                        links: [{
                            source: 0,
                            target: 1
                        }, {
                            source: 1,
                            target: 2
                        }],
                        data: [
                            ['A1', 'U', 10], ['A1', 'V', 20], ['A2', 'U', 30],
                            ['A2', 'V', 40], ['A31', 'U', 50], ['A3', 'V', 60]
                        ],
                        label: {
                            show: true,
                            formatter: params => {
                                return params.data[2];
                            }
                        }
                    }]
                };

                var chart = testHelper.create(echarts, 'main2', {
                    title: [
                        'Graph with Matrix'
                    ],
                    option: option
                });
            });
        </script>






        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                var option;
                option = {
                    matrix: {
                        x: {
                            data: [{
                                value: 'A',
                                children: ['A1', 'A2', {
                                    value: 'A3',
                                    children: ['A31', 'A32']
                                }]
                            }]
                        },
                        y: {
                            data: ['U', 'V']
                        }
                    },
                    series: [{
                        type: 'scatter',
                        coordinateSystem: 'matrix',
                        symbolSize: 30,
                        data: [
                            ['A1', 'U', 10], ['A1', 'V', 20], ['A2', 'U', 30]
                        ],
                        label: {
                            show: true,
                            formatter: params => {
                                return params.data[2];
                            }
                        }
                    }, {
                        type: 'effectScatter',
                        coordinateSystem: 'matrix',
                        symbolSize: function (val) {
                            return val[2] / 3;
                        },
                        data: [
                            ['A2', 'V', 40], ['A31', 'U', 50], ['A3', 'V', 60]
                        ],
                    }]
                };

                var chart = testHelper.create(echarts, 'main3', {
                    title: [
                        'Scatter and effectScatter with Matrix'
                    ],
                    option: option
                });
            });
        </script>






        <script>
            require([
                'echarts',
                // 'map/js/china',
                // './data/nutrients.json'
            ], function (echarts) {
                var option;
                option = {
                    matrix: {
                        x: {
                            data: [{
                                value: 'A',
                                children: ['A1', 'A2', {
                                    value: 'A3',
                                    children: ['A31', 'A32']
                                }]
                            }]
                        },
                        y: {
                            data: ['U', 'V']
                        }
                    },
                    series: [{
                        type: 'custom',
                        coordinateSystem: 'matrix',
                        data: [
                            ['A1', 'U', 89, '😄'], ['A31', 'V', 95, '😍'], ['A2', 'U', 45, '😠']
                        ],
                        encode: {
                            x: 0,
                            y: 1,
                            value: 2,
                            label: 3
                        },
                        renderItem: function (params, api) {
                            const x = api.value(0);
                            const y = api.value(1);
                            const center = api.coord([x, y]);
                            const size = api.size([x, y]);
                            const fontSize = 20;
                            const padding = 10;
                            const left = center[0] - size[0] / 2;
                            const top = center[1] - size[1] / 2;
                            const value = api.value(2);
                            return {
                                type: 'group',
                                children: [{
                                    type: 'rect',
                                    shape: {
                                        x: left + padding,
                                        y: top + padding,
                                        width: (size[0] - padding * 2) / 100 * value,
                                        height: size[1] - padding * 2
                                    },
                                    style: {
                                        fill: value > 90 ? 'green'
                                            : value > 60 ? 'orange'
                                                : 'red',
                                    }
                                }, {
                                    type: 'text',
                                    style: {
                                        x: left + (size[0] - padding * 2) / 100 * value - padding,
                                        y: center[1] - fontSize / 2,
                                        text: api.value(3),
                                        fontSize: fontSize,
                                        textBaseline: 'middle',
                                        textAlign: 'center'
                                    }
                                }, {
                                    type: 'text',
                                    style: {
                                        x: left + 30,
                                        y: center[1] - fontSize / 2,
                                        text: api.value(2),
                                        fontSize: fontSize,
                                        textBaseline: 'middle',
                                        textAlign: 'center',
                                        fill: 'white'
                                    }
                                }]
                            };
                        }
                    }]
                };

                var chart = testHelper.create(echarts, 'main4', {
                    title: [
                        'Custom series with Matrix'
                    ],
                    option: option
                });
            });
        </script>
    </body>
</html>

