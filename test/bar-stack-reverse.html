<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="lib/simpleRequire.js"></script>
        <script src="lib/config.js"></script>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/testHelper.js"></script>
        <link rel="stylesheet" href="lib/reset.css" />
    </head>
    <body>
        <style>
            #main {
                width: 100%;
                height: 100%;
            }
            .test-title {
                padding: 10px;
                margin: 10px 0;
                font-weight: bold;
                font-size: 16px;
            }
            .chart-container {
                width: 100%;
                height: 400px;
                margin-bottom: 20px;
            }
        </style>
        <div class="test-title">Stack Order Test: 'normal' vs 'reverse'</div>
        
        <!-- Vertical Bar Charts -->
        <div class="test-title">1. Vertical Bar Charts (Default vs Reversed)</div>
        <div id="verticalBar" class="chart-container"></div>
        
        <!-- Horizontal Bar Charts -->
        <div class="test-title">2. Horizontal Bar Charts (Default vs Reversed)</div>
        <div id="horizontalBar" class="chart-container"></div>
        
        <!-- Stacked Line Charts -->
        <div class="test-title">3. Stacked Line Charts (Default vs Reversed)</div>
        <div id="stackedLine" class="chart-container"></div>
        
        <script>
            require(['echarts'], function (echarts) {
                // Original data
                const data = [
                    { category: 'A', value1: 10, value2: 20, value3: 30 },
                    { category: 'B', value1: 15, value2: 25, value3: 35 },
                    { category: 'C', value1: 20, value2: 15, value3: 25 },
                    { category: 'D', value1: 25, value2: 10, value3: 20 },
                    { category: 'E', value1: 30, value2: 20, value3: 10 }
                ];
                
                // 1. Vertical Bar Charts
                const verticalBarChart = echarts.init(document.getElementById('verticalBar'));
                const verticalBarOption = {
                    title: {
                        text: 'Vertical Bar Charts',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        data: ['Series 1', 'Series 2', 'Series 3'],
                        top: 30
                    },
                    grid: [
                        { left: '5%', right: '55%', top: '15%', bottom: '10%' },
                        { left: '55%', right: '5%', top: '15%', bottom: '10%' }
                    ],
                    xAxis: [
                        {
                            type: 'category',
                            data: data.map(item => item.category),
                            gridIndex: 0,
                            name: 'Normal Order',
                            nameLocation: 'middle',
                            nameGap: 30
                        },
                        {
                            type: 'category',
                            data: data.map(item => item.category),
                            gridIndex: 1,
                            name: 'Reverse Order',
                            nameLocation: 'middle',
                            nameGap: 30
                        }
                    ],
                    yAxis: [
                        {
                            type: 'value',
                            gridIndex: 0
                        },
                        {
                            type: 'value',
                            gridIndex: 1
                        }
                    ],
                    series: [
                        // Default stacking order
                        {
                            name: 'Series 1',
                            type: 'bar',
                            stack: 'stack1',
                            data: data.map(item => item.value1),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#5470c6' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 2',
                            type: 'bar',
                            stack: 'stack1',
                            data: data.map(item => item.value2),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#91cc75' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 3',
                            type: 'bar',
                            stack: 'stack1',
                            data: data.map(item => item.value3),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#fac858' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        // Reversed stacking order
                        {
                            name: 'Series 1',
                            type: 'bar',
                            stack: 'stack2',
                            stackOrder: 'reverse',  // Reverse stacking order
                            data: data.map(item => item.value1),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#5470c6' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 2',
                            type: 'bar',
                            stack: 'stack2',
                            data: data.map(item => item.value2),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#91cc75' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 3',
                            type: 'bar',
                            stack: 'stack2',
                            data: data.map(item => item.value3),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#fac858' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        }
                    ]
                };
                verticalBarChart.setOption(verticalBarOption);
                
                // 2. Horizontal Bar Charts
                const horizontalBarChart = echarts.init(document.getElementById('horizontalBar'));
                const horizontalBarOption = {
                    title: {
                        text: 'Horizontal Bar Charts',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    legend: {
                        data: ['Series 1', 'Series 2', 'Series 3'],
                        top: 30
                    },
                    grid: [
                        { left: '15%', right: '55%', top: '15%', bottom: '10%' },
                        { left: '55%', right: '15%', top: '15%', bottom: '10%' }
                    ],
                    xAxis: [
                        {
                            type: 'value',
                            gridIndex: 0
                        },
                        {
                            type: 'value',
                            gridIndex: 1
                        }
                    ],
                    yAxis: [
                        {
                            type: 'category',
                            data: data.map(item => item.category),
                            gridIndex: 0,
                            name: 'Normal Order',
                            nameLocation: 'middle',
                            nameGap: 50
                        },
                        {
                            type: 'category',
                            data: data.map(item => item.category),
                            gridIndex: 1,
                            name: 'Reverse Order',
                            nameLocation: 'middle',
                            nameGap: 50
                        }
                    ],
                    series: [
                        // Default stacking order
                        {
                            name: 'Series 1',
                            type: 'bar',
                            stack: 'hstack1',
                            data: data.map(item => item.value1),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#5470c6' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 2',
                            type: 'bar',
                            stack: 'hstack1',
                            data: data.map(item => item.value2),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#91cc75' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 3',
                            type: 'bar',
                            stack: 'hstack1',
                            data: data.map(item => item.value3),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#fac858' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        // Reversed stacking order
                        {
                            name: 'Series 1',
                            type: 'bar',
                            stack: 'hstack2',
                            stackOrder: 'reverse',  // Reverse stacking order
                            data: data.map(item => item.value1),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#5470c6' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 2',
                            type: 'bar',
                            stack: 'hstack2',
                            data: data.map(item => item.value2),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#91cc75' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        },
                        {
                            name: 'Series 3',
                            type: 'bar',
                            stack: 'hstack2',
                            data: data.map(item => item.value3),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#fac858' },
                            label: {
                                show: true,
                                position: 'inside'
                            }
                        }
                    ]
                };
                horizontalBarChart.setOption(horizontalBarOption);
                
                // 3. Stacked Line Charts
                const stackedLineChart = echarts.init(document.getElementById('stackedLine'));
                const stackedLineOption = {
                    title: {
                        text: 'Stacked Line Charts',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: ['Series 1', 'Series 2', 'Series 3'],
                        top: 30
                    },
                    grid: [
                        { left: '5%', right: '55%', top: '15%', bottom: '10%' },
                        { left: '55%', right: '5%', top: '15%', bottom: '10%' }
                    ],
                    xAxis: [
                        {
                            type: 'category',
                            data: data.map(item => item.category),
                            gridIndex: 0,
                            name: 'Normal Order',
                            nameLocation: 'middle',
                            nameGap: 30
                        },
                        {
                            type: 'category',
                            data: data.map(item => item.category),
                            gridIndex: 1,
                            name: 'Reverse Order',
                            nameLocation: 'middle',
                            nameGap: 30
                        }
                    ],
                    yAxis: [
                        {
                            type: 'value',
                            gridIndex: 0
                        },
                        {
                            type: 'value',
                            gridIndex: 1
                        }
                    ],
                    series: [
                        // Default stacking order
                        {
                            name: 'Series 1',
                            type: 'line',
                            stack: 'linestack1',
                            data: data.map(item => item.value1),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#5470c6' },
                            areaStyle: {},
                            symbol: 'circle',
                            symbolSize: 6
                        },
                        {
                            name: 'Series 2',
                            type: 'line',
                            stack: 'linestack1',
                            data: data.map(item => item.value2),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#91cc75' },
                            areaStyle: {},
                            symbol: 'circle',
                            symbolSize: 6
                        },
                        {
                            name: 'Series 3',
                            type: 'line',
                            stack: 'linestack1',
                            data: data.map(item => item.value3),
                            xAxisIndex: 0,
                            yAxisIndex: 0,
                            itemStyle: { color: '#fac858' },
                            areaStyle: {},
                            symbol: 'circle',
                            symbolSize: 6
                        },
                        // Reversed stacking order
                        {
                            name: 'Series 1',
                            type: 'line',
                            stack: 'linestack2',
                            stackOrder: 'reverse',  // Reverse stacking order
                            data: data.map(item => item.value1),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#5470c6' },
                            areaStyle: {},
                            symbol: 'circle',
                            symbolSize: 6
                        },
                        {
                            name: 'Series 2',
                            type: 'line',
                            stack: 'linestack2',
                            data: data.map(item => item.value2),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#91cc75' },
                            areaStyle: {},
                            symbol: 'circle',
                            symbolSize: 6
                        },
                        {
                            name: 'Series 3',
                            type: 'line',
                            stack: 'linestack2',
                            data: data.map(item => item.value3),
                            xAxisIndex: 1,
                            yAxisIndex: 1,
                            itemStyle: { color: '#fac858' },
                            areaStyle: {},
                            symbol: 'circle',
                            symbolSize: 6
                        }
                    ]
                };
                stackedLineChart.setOption(stackedLineOption);
                
                // Responsive resize
                window.addEventListener('resize', function() {
                    verticalBarChart.resize();
                    horizontalBarChart.resize();
                    stackedLineChart.resize();
                });
            });
        </script>
    </body>
</html> 